# Production Environment Configuration for gthanks
# Copy this file to .env.production and fill in your values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL (recommended for production)
DATABASE_URL=postgresql://username:password@localhost:5432/gthanks_prod

# SQLite (for small deployments)
# DATABASE_URL=file:./data/gthanks.db

# Database initialization settings
# Set to true to force database initialization on first run
DB_FORCE_INIT=false

# Set to true to automatically initialize database if tables don't exist
DB_AUTO_INIT=true

# Secret key for manual database initialization via API endpoint
# Generate with: openssl rand -base64 32
DB_INIT_SECRET=your_secure_db_init_secret_here

# =============================================================================
# AUTHENTICATION
# =============================================================================

# NextAuth Configuration

# CORS Configuration
# Controls which origin can access the API (defaults to NEXTAUTH_URL)
# CORS_ALLOWED_ORIGIN=https://gthanks.app

NEXTAUTH_URL=https://your-domain.com
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your_32_character_or_longer_secret_here

# =============================================================================
# OAUTH PROVIDERS (all optional)
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Facebook OAuth
FACEBOOK_CLIENT_ID=
FACEBOOK_CLIENT_SECRET=

# Apple OAuth
APPLE_ID=
APPLE_SECRET=

# Generic OIDC Provider
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_ISSUER=

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Sender email address and display name
EMAIL_FROM=noreply@your-domain.com
EMAIL_FROM_NAME=gThanks

# SMTP Configuration (Gmail example)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
# For Gmail, use App Password: https://support.google.com/accounts/answer/185833
SMTP_PASS=your-app-specific-password

# Alternative: SendGrid
# EMAIL_PROVIDER=sendgrid
# SENDGRID_API_KEY=your_sendgrid_api_key

# Alternative: AWS SES
# EMAIL_PROVIDER=ses
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1

# =============================================================================
# STORAGE (for user uploads)
# =============================================================================

# Local storage (default)
STORAGE_PROVIDER=local
UPLOAD_DIR=/app/uploads

# S3-compatible storage
# STORAGE_PROVIDER=s3
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your_access_key
# S3_SECRET_ACCESS_KEY=your_secret_key
# S3_ENDPOINT=https://s3.amazonaws.com

# =============================================================================
# PERFORMANCE & CACHING
# =============================================================================

# Redis/Valkey for caching (optional but recommended)
# REDIS_URL=redis://localhost:6379

# CDN for static assets (optional)
# CDN_URL=https://cdn.your-domain.com

# =============================================================================
# SECURITY
# =============================================================================

# Content Security Policy
CSP_REPORT_URI=https://your-domain.com/api/csp-report

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Trusted proxy settings (for reverse proxy setups)
TRUSTED_PROXY_IPS=127.0.0.1,::1

# =============================================================================
# MONITORING & ANALYTICS (all optional)
# =============================================================================

# Sentry for error tracking
# SENTRY_DSN=https://your-key@sentry.io/project-id
# SENTRY_ENVIRONMENT=production

# Google Analytics
# GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Plausible Analytics
# PLAUSIBLE_DOMAIN=your-domain.com
# PLAUSIBLE_API_HOST=https://plausible.io

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
FEATURE_OAUTH_LOGIN=true
FEATURE_MAGIC_LINKS=true
FEATURE_IMAGE_UPLOAD=true
FEATURE_URL_METADATA=true
FEATURE_SHARE_LISTS=true
FEATURE_GROUPS=true
FEATURE_RESERVATIONS=true

# =============================================================================
# DEPLOYMENT SPECIFIC
# =============================================================================

# Node.js settings
NODE_ENV=production
NODE_OPTIONS=--max-old-space-size=512

# Port configuration
PORT=3000

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Health check endpoint
HEALTH_CHECK_PATH=/api/health

# Graceful shutdown timeout (ms)
SHUTDOWN_TIMEOUT=10000